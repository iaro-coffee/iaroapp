{% extends "base_generic.html" %}

{% block content %}

<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"
     xmlns:task.done_datetime xmlns:task.done_datetime xmlns:task.done_datetime xmlns:task.done_datetime>
    <h1 class="h2">Tips Overview</h1>
</div>

<div style="width: 100%;">
    {% for entry in items%}
    <div class="list-group">
        <h4 data-bs-toggle="collapse" href="#collapse{{ entry.id }}" role="button" class="list-group-item" style="margin-bottom: 0px; margin-top: 15px;">{{ entry.date }}</h4>
        <div class="list-group-item collapse {% if entry.date == today %}show{% endif %}" id="collapse{{ entry.id }}">
            <table class="table table-hover">
                <thead>
                <tr>
                    <th scope="col" style="white-space: nowrap;">Name</th>
                    <th scope="col">Stunden</th>
                    <th scope="col">Wert</th>
                </tr>
                </thead>
                <tbody>
                    {% for tip in entry.assignedTips %}
                      <tr>
                          <td style="vertical-align: middle;"><label>{{ tip.name }}</label></td>
                          <td style="vertical-align: middle;"><label>{{ tip.hours }}</label></td>
                          <td style="vertical-align: middle;"><label>€{{ tip.amount }}</label></td>
                      </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <td style="vertical-align: middle;"><label><strong>Summe</strong></label></td>
                        <td style="vertical-align: middle;"><label><strong>{{ entry.sumHours }}</strong></label></td>
                        <td style="vertical-align: middle;"><label><strong>€{{ entry.sumAmount }}</strong></label></td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
    {% endfor %}
</div>

<style>
  table {
    font-size: 1rem;
  }
  label {
    width: 100%;
    padding: .9rem;
    user-select: none;
    height: 100%;
  }
  tbody tr {
    background-color: rgb(248, 215, 218);
    border-bottom-color: rgb(201, 192, 192) !important;
  }
  tbody tr.done {
    background-color: rgb(209, 231, 221);
  }
  td:not(first-child) {
    padding: 0rem !important;
    overflow-wrap: anywhere;
  }
  td:first-child {
    padding: 0.8rem !important;
  }
</style>

<script type="text/javascript">
  (() => {
    console.log("collapse{{ today }}");
    document.getElementById("collapse{{ today }}").scrollIntoView({
      behavior: 'smooth'
    });
  })()
</script>

{% endblock %}